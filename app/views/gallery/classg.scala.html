@(data: ClassData, ps: Seq[(String, String)])

@import andon.utils._

@li(fullsize: String, thumbnail: String) = {
  <li class="span4">
    <a class="fresco" href="@fullsize" data-fresco-group="gallery">
      <img src="@thumbnail">
    </a>
  </li>
}

@common(data.id.toString + " " + data.title) {
  <link rel="stylesheet" media="screen" href="@routes.Assets.at("css/gallery.css")">
} {
  @Images.findImagePath(data).map { path =>
    <div class="top-wrapper">
      <a class="fresco top-image" href="@Images.toFullsize(path)" data-fresco-group="gallery">
        <img src="@Images.toFullsize(path)">
      </a>

      <dl class="dl">
        <dt>回</dt>
        <dd>@data.id.times</dd>

        <dt>学年</dt>
        <dd>@data.id.grade年</dd>

        <dt>組</dt>
        <dd>@Util.showClassN(data.id.classn)組</dd>

        <dt>タイトル</dt>
        <dd>@data.title</dd>

        <dt>賞</dt>
        <dd>@data.prize.map(_.span).getOrElse { なし }</dd>

        <dt>タグ</dt>
        <dd>
          <ul class="tags">
          @Tags.findByClassId(data.id).map { tag =>
            <li><a href="@routes.Application.tags(tag.tag)">@tag.tag</a></li>
          }
          </ul>
        </dd>

        <dt>講評</dt>
        <dd>
          @Reviews.findByClassId(data.id).map { review =>
            <p>@review.text by @Accounts.findNameById(review.accountId)</p>
          }
        </dd>
      </dl>
    </div>
  }.getOrElse {
  }

  <ul class="thumbnails">
    @ps.map { p => @li(p._1, p._2) }
  </ul>
} {
}
