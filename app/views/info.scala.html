@(infos: Seq[Article], page: Int, max: Int)

@import andon.utils._

@pager = {
  <ul class="pager">
    @if(page <= 0) {
      <li class="previous disabled"><a href="#">&larr; 前へ</a></li>
    } else {
      <li class="previous"><a href="@routes.Application.info(page - 1)">&larr; 前へ</a></li>
    }
    @if(page >= max) {
      <li class="next disabled"><a href="#">次へ &rarr;</a></li>
    } else {
      <li class="next"><a href="@routes.Application.info(page + 1)">次へ &rarr;</a></li>
    }
  </ul>
}

@common("Information") {
  <link rel="stylesheet" media="screen" href="@routes.Assets.at("css/info.css")">
} {

  <h3>お知らせ</h3>

  <div class="article">
    @Articles.findByType(InfoTop).map { article =>
      @Conv.both(article.text)
    }
  </div>

  <h3>新着コメント</h3>

  <ul class="new-comments">
    @Comments.take(5).map { comment =>
      @Articles.findById(comment.articleId).map { article =>
        <li>
          <a href="@routes.Application.article(article.id)#comment-@comment.id">
            @comment.name - @article.title
          </a>
        </li>
      }
    }
  <ul>

  <h3>管理人からのお知らせ</h3>

  @pager

  @infos.map { article =>
    <div class="info-post">
      <div class="article">
        <p class="date">@DateUtil.dateFormat(article.createDate)</p>
        <h1 class="title">@article.title</h1>
        <div class="info-text">
          @Conv.both("""\A.*""".r.findFirstIn(article.text).getOrElse(""))
          <a href="@routes.Application.article(article.id)">続きを読む</a>
        </div>
        <p class="author">Posted by @Accounts.findNameById(article.createAccountId)</p>
      </div>
    </div>
  }

  @pager
} {
  <script type="text/javascript" src="@routes.Assets.at("js/disabledAnchor.js")"></script>
}
